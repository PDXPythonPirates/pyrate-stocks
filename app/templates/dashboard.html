{% extends "base.html" %}

{% block title %}{{super()}}{{ username }}{% endblock %}

{% block content %}
<div class="p-4">
  <h1>Dashboard</h1>
  <link rel='stylesheet' href={{ cdn_css | safe}} type="text/css" />>
  <script type='text/javascript' src={{ cdn_js | safe }}></script>

  <form action="{{ url_for('main_bp.add') }}" method="post">
    <div>
      <input type="text" name="symbol" placeholder="Ex: AAPL" required><br>
      <button class="add-ticker btn btn-primary btn-sm mt-3" type="submit">Add Ticker</button>
    </div>
  </form>
</div>
{% if stocks %}
<div class="p-4">
  <h3>Followed Stock Tickers</h3>
  {% for stock in stocks %}
  <div class="mb-3 p-3 border border-primary">
    <h2 class="text-primary">{{ stock.symbol }}</h2>
    <p class="text-primary">{{ stock.name }}</p>
    <p class="text-primary">Current Price: <span class="text-success">${{ stock.current_price }}</span></p>
    <p class="text-primary">High: <span class="text-secondary">${{ stock.high }}</span></p>
    <p class="text-primary">Low: <span class="text-secondary">${{ stock.low }}</span></p>
    <p class="text-primary">Open: <span class="text-secondary">${{ stock.open }}</span></p>
    <p class="text-primary">Close: <span class="text-secondary">${{ stock.close }}</span></p>
    <a class="text-primary" href="/plot/{{ stock.symbol }}">Ticker Historical Closing Data</a>
    <a class="text-danger" href="/delete/{{ stock.symbol }}">Delete Ticker</a>
  </div>
  {% endfor %}
</div>
{% else %}
{% endif %}

<div class="account-logout p-4">
   <form class="" name="" action="{{ url_for('main_bp.logout') }}" method="POST">
      {{ display_message }}
      {{ loform.csrf_token }}
      <input class="btn btn-primary btn-sm" type="submit" value="Logout"/>
   </form>
</div>
{% endblock %}